import{j as e,g as f}from"./index-gCpsBy-1.js";import{r as o}from"./react-Bkz_NVCf.js";import{h as v}from"./lucide-2xugtfnM.js";function y(){const[n,u]=o.useState({}),[p,l]=o.useState(!0),[x,m]=o.useState(null),[t,h]=o.useState(null);o.useEffect(()=>{const s=async()=>{try{l(!0);const r=await f();console.log("Received peer conversations:",r),u(r),m(null);const c=Object.keys(r);h(d=>d&&c.includes(d)?d:c.length>0?c[0]:null)}catch(r){console.error("Error loading peer conversations:",r),m("⚠️ Failed to load peer conversations. Please try again.")}finally{l(!1)}};s();const a=setInterval(s,5e3);return()=>clearInterval(a)},[]);const i=Object.keys(n),b=s=>{var a,r;return((r=(a=n[s])==null?void 0:a.host_info)==null?void 0:r.hostname)||s};return e.jsxs("div",{className:"min-h-screen bg-dark text-bright font-inter",children:[e.jsx("div",{className:"border-b border-divider p-5 backdrop-blur-sm bg-surface-2/70",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(v,{className:"h-8 w-8 text-accent"}),e.jsx("h1",{className:"text-3xl font-semibold text-bright",children:"Peer Conversations"})]})}),e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:p&&i.length===0?e.jsx("div",{className:"flex justify-center mt-20",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-accent"})}):x?e.jsx("div",{className:"text-center text-red-400 bg-red-900/20 rounded-lg p-4 border border-red-700/40",children:x}):i.length===0?e.jsx("div",{className:"text-center text-dim mt-16",children:"No peer conversations available"}):e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx("div",{className:"flex flex-wrap gap-4 mb-8 justify-center",children:i.map(s=>e.jsx("button",{onClick:()=>h(s),className:`px-5 py-2.5 rounded-md text-sm font-medium transition-colors border 
                    ${t===s?"bg-accent text-black border-accent":"bg-panel text-bright border-divider hover:border-accent/60"}
                  `,children:b(s)},s))}),t&&n[t]&&e.jsxs("div",{className:"bg-panel/80 rounded-2xl p-6 border border-divider backdrop-blur-sm shadow-soft",children:[e.jsxs("div",{className:"mb-5 border-b border-divider pb-4",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-accent",children:["Peer: ",b(t)]}),e.jsxs("div",{className:"text-sm text-dim mt-2",children:[e.jsxs("div",{children:["Hostname: ",n[t].host_info.hostname," (",t,")"]}),e.jsxs("div",{children:["LLM Host:"," ",e.jsx("span",{className:`font-semibold ${n[t].host_info.is_llm_host?"text-accent":"text-dim"}`,children:n[t].host_info.is_llm_host?"Yes":"No"})]})]})]}),e.jsx("div",{className:"space-y-5",children:n[t].messages.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl transition-colors bg-surface border border-divider",children:[s.message_type==="Response"?e.jsx(v,{className:"w-6 h-6 text-accent"}):e.jsx("div",{className:"w-6 h-6 rounded-full bg-surface-2 border border-divider flex items-center justify-center text-white text-xs font-medium",children:"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-dim mb-1",children:new Date(s.timestamp).toLocaleString()}),e.jsx("p",{className:"text-bright whitespace-pre-wrap leading-relaxed",children:s.content})]})]},a))})]})]})})]})}export{y as PeersConversation};
